// https://docs.gradle.org/current/userguide/application_plugin.html
plugins {
    id 'application'
}

application {
    mainClass = 'expectusafterlun.ch.jspeak.JSpeak'
    applicationDefaultJvmArgs = ['--enable-preview']
}

apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'application'

mainClassName = 'expectusafterlun.ch.jspeak.JSpeak'

repositories {
    mavenCentral()
}

dependencies {
    // https://mvnrepository.com/artifact/com.miglayout/miglayout-swing
    implementation group: 'com.miglayout', name: 'miglayout-swing', version: '5.0'
    testImplementation     'junit:junit:4.13'

    // https://www.oreilly.com/library/view/gradle-beyond-the/9781449373801/ch04.html
    // Example 4-12. Declaring dependencies on subprojects
    //compile project(':espeak')
    //compile project(':mbrola')

//    implementation 'com.harium.hci:espeak:1.0.3'
}

// https://stackoverflow.com/questions/55433883/how-to-enable-java-12-preview-features-with-gradle
tasks.withType(JavaCompile).each {
    it.options.compilerArgs.add('--enable-preview')
}

test {
    jvmArgs(['--enable-preview'])
}

// https://stackoverflow.com/questions/61849514/how-to-set-the-use-enable-preview-compile-and-run-flags-from-gradle
tasks.withType(JavaExec) {
    jvmArgs += '--enable-preview'
}
