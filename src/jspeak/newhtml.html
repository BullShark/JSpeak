<div dir="ltr" style="text-align: left;" trbidi="on">
  Here's how I solved it, and please let me know if this fixes your LFS. <br />
  <br />
  Some users are having this same problem with LFS (Linux From Scratch) such as&nbsp; of course, you will have to do things a bit different in LFS because you're not using emerge, and I don't know if you can put binary packages in LFS. If not, maybe you can extract the contents of [url]http://tinderbox.dev.gentoo.org/default-linux/x86/sys-devel/binutils-2.21.1-r1.tbz2[/url] (that's for x86, so if you're using something else, browse to the right url patch) except for gentoo specific files (probably won't hurt). Hopefully your filesystem layout (paths) are the same or adjust accordingly. Keep reading to see why I used binutils. It might be a different package (or source tarball) that needs to be reinstalled with your system.<br />
  <br />
  Notice that when I made the simple hello.c<br />
  <br />
  [CODE]<br />
  <script type="syntaxhighlighter" class="brush: js"><![CDATA[
    #include <stdio.h><br /><br />main() {<br />&nbsp; printf("Hello Working GCC\n");<br />}</stdio.h>
  </script>
  <br />
  <stdio.h>[/CODE]<br /><br />and then I did<br /><br />[CODE]</stdio.h><br />
  <stdio.h>bullshark@beastlinux ~ % gcc hello.c -o hello<br />/usr/lib/gcc/i686-pc-linux-gnu/4.5.3/../../../../i686-pc-linux-gnu/bin/as: symbol lookup error: /usr/lib/binutils/i686-pc-linux-gnu/2.21.1/libopcodes-2.21.1.so: undefined symbol: buffer_read_memory<br />bullshark@beastlinux ~ %</stdio.h><br />
  <stdio.h>[/CODE]<br /><br />Even if you're not getting the same error as me, the error message you get will be useful in troubleshooting your problem.<br /><br />Notice it says binutils in there, so that gave me the idea to reinstall binutils, couldn't hurt to try.<br /><br />I already had setup my Gentoo installation to be able to use binary packages so that I could get a working gcc. I will write how I did that for anybody that's also using Gentoo.<br /><br />Add these to lines to your /etc/make.conf<br /><br />[CODE]</stdio.h><br />
  <stdio.h>PKGDIR="/usr/portage/packages"<br />PORTAGE_BINHOST="http://tinderbox.dev.gentoo.org/default-linux/x86/"</stdio.h><br />
  <stdio.h>[/CODE]<br /><br />You're likely not using x86 like I am, so make sure to change that url. You can browse the url to <br /><br />Create that directory. Don't worry, any subdirectory under that will automatically be created for you.<br /><br />[CODE]</stdio.h><br />
  <stdio.h>mkdir -p /usr/portage/packages</stdio.h><br />
  <stdio.h>[/CODE]<br /><br />These are the commands I used to install gcc and binutils<br /><br />[CODE]</stdio.h><br />
  <stdio.h>emerge --getbinpkgonly --oneshot -av sys-devel/gcc<br />emerge --getbinpkgonly --oneshot -av sys-devel/binutils</stdio.h><br />
  <stdio.h>[/CODE]<br /><br />Now try to compile hello.c<br /><br />[CODE]</stdio.h><br />
  <stdio.h>bullshark@beastlinux ~ % gcc hello.c -o hello<br />bullshark@beastlinux ~ % ./hello<br />Hello Working GCC<br />bullshark@beastlinux ~ %&nbsp;</stdio.h><br />
  <stdio.h>[/CODE]<br /><br style="color: red;" /><b style="color: red;">Important</b>, if you've read the gcc upgrading guide on the gentoo docs, it says to rebuild libtools.<br /><br />Also downgrading gcc is highly discouraged and says it will result in strange behaviour, so do not use this gcc to compile anything but a newer gcc<br /><br />And it will likely be an older gcc.<br /><br />After emerging the new gcc, set it as your default gcc with gcc-config (See gentoo docs on upgrading gcc for more details on how to do this.)<br /><br />Now you've to repeat the process because you just changed gcc versions again. Also, because I wanted all my packages compiled with source using my CFLAG's and USE flags, I recompiled binutils<br /><br />[CODE]</stdio.h><br />
  <stdio.h>emerge -av --oneshot sys-devel/libtools<br />emerge -av --oneshot sys-devel/binutils<br />[/CODE]<br /><br />As always, do<br /><br />[CODE]</stdio.h><br />
  <stdio.h>env-update &amp;&amp; . /etc/profile</stdio.h><br />
  <stdio.h>[/CODE]<br /><br /><b style="color: orange;">Note:</b> If you haven't figured out what the . does when used this way, it's an alias to source, so if you really wanted to, you could just source /etc/profile. Both will give you the same result.<br /><br /><b>Now you've got a working Gentoo system again!</b><br /><br />Also Gentoo had put in my user's .bashrc (and .zshrc because I use zsh also) export PATH=..... with a path to the gcc versions bin directory. Probably not relevant, but since I use sudo and have configured, added my user to the wheel group and configured it so that it prompts me for the password to run a command as root, i added all the sbin (system binary) paths to my .bashrc (and .zshrc) with<br /><br />[CODE]</stdio.h><br />
  <stdio.h>export PATH=$PATH:/home/bullshark/bin:/usr/local/sbin:/usr/sbin:/sbin</stdio.h><br />
  <stdio.h>[/CODE]<br /><br />Replace /home/bullshark/bin to your username if you create a bin in your users home directory (which is pretty useful).</stdio.h></div>
